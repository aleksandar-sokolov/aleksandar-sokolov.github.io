(this["webpackJsonpmade-for-you"]=this["webpackJsonpmade-for-you"]||[]).push([[0],{19:function(e,t,r){},26:function(e,t,r){},28:function(e,t,r){},35:function(e,t,r){},36:function(e,t,r){},37:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),s=r(20),a=r.n(s),o=r(3),i=(r(26),r(2)),u=r(4),l=r(0),j=Object(n.createContext)(),d=function(e){var t=Object(n.useState)(""),r=Object(u.a)(t,2),c=r[0],s=r[1];return Object(l.jsx)(j.Provider,{value:{errorMessage:c,displayError:function(e){s(e)},clearError:function(){s("")}},children:e.children})},p=Object(n.createContext)(),b=function(e){var t=Object(n.useState)(localStorage.username||null),r=Object(u.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)(localStorage.userId||null),o=Object(u.a)(a,2),i=o[0],j=o[1],d=Object(n.useState)(localStorage.userToken||null),b=Object(u.a)(d,2),h=b[0],O=b[1];return Object(l.jsx)(p.Provider,{value:{username:c,userId:i,userToken:h,fillUserData:function(e){s(e.username),j(e.objectId),O(e["user-token"]),localStorage.setItem("username",e.username),localStorage.setItem("userId",e.objectId),localStorage.setItem("userToken",e["user-token"])},clearUserData:function(){s(null),j(null),O(null),localStorage.removeItem("username"),localStorage.removeItem("userId"),localStorage.removeItem("userToken")}},children:e.children})},h=(r(28),function(){var e=Object(n.useContext)(p),t=e.username,r=e.clearUserData;return Object(l.jsxs)("div",{className:"NavBar",children:[Object(l.jsx)(o.c,{to:"/",exact:!0,children:Object(l.jsx)("img",{src:"/logo.png",alt:"Made 4 You"})}),t?Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:r,children:"Logout"}),Object(l.jsxs)(o.c,{to:"/user/".concat(t),children:["Hello, ",t]}),Object(l.jsx)(o.c,{to:"/product/add",children:"Add Product"})]}):Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.c,{to:"/register",children:"Register"}),Object(l.jsx)(o.c,{to:"/login",children:"Login"})]}),Object(l.jsx)(o.c,{to:"/about",children:"About"}),Object(l.jsx)(o.c,{to:"/contacts",children:"Contacts"}),Object(l.jsx)(o.c,{to:"/",exact:!0,children:"Home"})]})}),O=function(){return Object(l.jsx)("div",{style:{marginTop:"15px",textAlign:"center"},children:Object(l.jsx)("span",{children:"\xa9 Made 4 You"})})},m=r(11),x=r(5),f=r.n(x),g=r(10),v="https://eu-api.backendless.com/".concat("F1EABB0E-EEF7-4B8D-9318-AD11ABE2CB51","/").concat("CBD77200-3799-464B-87AD-F6584D447AD9","/"),y="users/login",w="users/register",E="data/".concat("products");function S(){return(S=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E,{method:"POST",headers:{"Content-Type":"application/json","user-token":r},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(g.a)(f.a.mark((function e(t,r,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E+"/"+n,{method:"PUT",headers:{"Content-Type":"application/json","user-token":r},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E+"/"+r,{method:"GET",headers:{}});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E,{method:"GET",headers:{}});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E+"/"+r,{method:"DELETE",headers:{"user-token":t}});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+E+"?where=ownerId%20%3D%20%27".concat(r,"%27"),{method:"GET",headers:{}});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P={getAll:function(e){return N.apply(this,arguments)},getOne:function(e,t){return k.apply(this,arguments)},deleteOne:function(e,t){return F.apply(this,arguments)},update:function(e,t,r){return C.apply(this,arguments)},add:function(e,t){return S.apply(this,arguments)},getAllFromUser:function(e,t){return U.apply(this,arguments)}},D=(r(35),function(e){var t=e.imgUrl,r=e.name,n=e.description,c=e.price,s=(e.owner,e.objectId);return Object(l.jsxs)("div",{className:"card",children:[Object(l.jsx)("img",{src:t,alt:r,style:{width:"100%"}}),Object(l.jsx)("h1",{children:r}),Object(l.jsxs)("p",{className:"price",children:["$",c]}),Object(l.jsx)("p",{children:n}),Object(l.jsx)("p",{children:Object(l.jsx)(o.b,{to:"/product/".concat(s),children:"Details"})})]})}),T=(r(36),function(){var e=Object(n.useContext)(j).displayError,t=Object(n.useState)(),r=Object(u.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)(!0),i=Object(u.a)(a,2),d=i[0],p=i[1];return Object(n.useEffect)((function(){P.getAll().then((function(e){if(e.hasOwnProperty("errorData"))throw new Error(e.message);s(e),p(!1)})).catch((function(t){e(t.message),p(!1)}))}),[]),Object(l.jsxs)("div",{className:"HomePage",children:[Object(l.jsx)("h1",{children:"Made 4 You"}),Object(l.jsx)("h2",{children:"Search, sell or buy handmade products"}),Object(l.jsx)("p",{children:"Made 4 You is a platform where you can find the perfect handmade gift or add products you make.After registration you can see the contacts of the sellers or add products that other people can see. "}),d&&Object(l.jsx)("p",{children:"Loading..."}),!c&&!d&&Object(l.jsxs)("p",{children:["No offers available . ",Object(l.jsx)(o.b,{to:"/product/add",children:"Add first ?"})," "]}),null===c||void 0===c?void 0:c.sort((function(e,t){return e.price-t.price})).map((function(e){return Object(l.jsx)(D,Object(m.a)({},e),e.objectId)}))]})}),A=function(){return Object(l.jsxs)("div",{className:"Contacts",style:{textAlign:"center"},children:[Object(l.jsx)("h1",{children:"Contacts"}),Object(l.jsx)("p",{children:"Address: Sofia, 1000"}),Object(l.jsx)("p",{children:"Phone: +359 888 888 888"})]})},I=(r(37),function(e){var t=e.children,r=Object(n.useState)("info-message"),c=Object(u.a)(r,2),s=c[0],a=c[1];return Object(l.jsxs)("div",{className:s,onClick:function(){return a("info-message hide")},children:[Object(l.jsx)("span",{children:" \u2139 "}),Object(l.jsx)("p",{children:t})]})}),L=(r(19),function(e){var t=e.history,r=Object(n.useContext)(j).displayError,c=Object(n.useContext)(p).userToken;return Object(l.jsxs)("div",{className:"ProductForm",children:[Object(l.jsx)(I,{children:"All fields are required!"}),Object(l.jsx)("h1",{children:"Add product form"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:e.target.name.value,price:e.target.price.value,imgUrl:e.target.imgUrl.value,description:e.target.description.value,contacts:e.target.contacts.value};Object.values(n).some((function(e){return""===e}))?r("All fields are required!"):(console.log(n),P.add(n,c).then((function(e){if(e.hasOwnProperty("errorData"))throw new Error(e.message);console.log(e),t.push("/")})).catch((function(e){r(e.message)})))},children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Enter product name ..."}),Object(l.jsx)("label",{htmlFor:"price",children:"Price"}),Object(l.jsx)("input",{type:"number",id:"price",name:"price",placeholder:"Enter product price ..."}),Object(l.jsx)("label",{htmlFor:"imgUrl",children:"image URL"}),Object(l.jsx)("input",{type:"text",id:"imgUrl",name:"imgUrl",placeholder:"Enter product image URL ..."}),Object(l.jsx)("label",{htmlFor:"description",children:"Description"}),Object(l.jsx)("textarea",{name:"description",id:"description",cols:"30",rows:"10",placeholder:"Enter product description ..."}),Object(l.jsx)("label",{htmlFor:"contacts",children:"Contacts"}),Object(l.jsx)("input",{type:"text",id:"contacts",name:"contacts",placeholder:"Enter your contacts ..."}),Object(l.jsx)("input",{type:"submit",value:"Submit"})]})]})}),B=(r(38),function(e){var t=e.match.params.id,r=Object(n.useState)(),c=Object(u.a)(r,2),s=c[0],a=c[1],i=Object(n.useState)(!0),j=Object(u.a)(i,2),d=j[0],b=j[1],h=Object(n.useState)(!1),O=Object(u.a)(h,2),x=O[0],f=O[1],g=Object(n.useContext)(p),v=g.username,y=g.userId,w=g.userToken;Object(n.useEffect)((function(){P.getOne(w,t).then((function(e){a(Object(m.a)({},e)),b(!1),y===e.ownerId&&f(!0)}))}),[]);return Object(l.jsxs)("div",{className:"ProductDetails",children:[d&&Object(l.jsx)("div",{children:"Loading..."}),s&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"details img",children:Object(l.jsx)("img",{src:s.imgUrl,alt:s.name})}),Object(l.jsxs)("div",{className:"details data",children:[Object(l.jsx)("h1",{children:s.name}),Object(l.jsxs)("p",{className:"price",children:["$",s.price]}),Object(l.jsx)("p",{children:s.description}),x&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("button",{onClick:function(){P.deleteOne(w,s.objectId).then((function(t){console.log(t),e.history.push("/")}))},children:"Delete"}),Object(l.jsx)(o.b,{to:"/edit/".concat(s.objectId),children:"Edit"})]}),!x&&v&&Object(l.jsxs)("p",{children:["Seller contacts: ",s.contacts]}),!v&&Object(l.jsxs)("p",{children:[Object(l.jsx)(o.b,{to:"/login",children:"Login"})," to see seller contacts!"]})]})]})]})}),R=function(e){var t=e.match,r=e.history,c=t.params.id,s=Object(n.useContext)(p).userToken,a=Object(n.useContext)(j).displayError,o=Object(n.useState)(),i=Object(u.a)(o,2),d=i[0],b=i[1],h=Object(n.useState)(!0),O=Object(u.a)(h,2),x=O[0],f=O[1];Object(n.useEffect)((function(){P.getOne("",c).then((function(e){b(Object(m.a)({},e)),f(!1),console.log(e)}))}),[c]);return Object(l.jsxs)("div",{className:"EditForm",children:[Object(l.jsx)("h1",{children:"Edit Form"}),x&&Object(l.jsx)("div",{children:"Loading ..."}),d&&Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:e.target.name.value,price:e.target.price.value,imgUrl:e.target.imgUrl.value,description:e.target.description.value};Object.values(t).some((function(e){return""===e}))?a("All fields are required!"):P.update(t,s,c).then((function(e){if(e.hasOwnProperty("errorData"))throw new Error(e.message);r.push("/product/"+c)})).catch((function(e){return a(e.message)}))},children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name"}),Object(l.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:d.name}),Object(l.jsx)("label",{htmlFor:"price",children:"Price"}),Object(l.jsx)("input",{type:"number",id:"price",name:"price",defaultValue:d.price}),Object(l.jsx)("label",{htmlFor:"imgUrl",children:"image URL"}),Object(l.jsx)("input",{type:"text",id:"imgUrl",name:"imgUrl",defaultValue:d.imgUrl}),Object(l.jsx)("label",{htmlFor:"description",children:"Description"}),Object(l.jsx)("input",{type:"text",id:"description",name:"description",defaultValue:d.description}),Object(l.jsx)("input",{type:"submit",value:"Submit"})]})]})};function M(){return(M=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(g.a)(f.a.mark((function e(t,r){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(v+y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:t,password:r})});case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(){var e=Object(i.f)(),t=Object(n.useContext)(p).fillUserData,r=Object(n.useContext)(j).displayError;return Object(l.jsxs)("div",{className:"login",children:[Object(l.jsx)("h2",{children:"Login Form"}),Object(l.jsxs)("form",{onSubmit:function(n){n.preventDefault(),function(e,t){return H.apply(this,arguments)}(n.target.username.value,n.target.password.value).then((function(r){if(r.hasOwnProperty("errorData"))throw new Error(r.message);console.log("successful login"),t(r),e.push("/")})).catch((function(e){r(e.message)}))},children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter username ... "}),Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Enter your password ..."}),Object(l.jsx)("input",{type:"submit",value:"Login"})]})]})},q=function(e){var t=e.history,r=Object(n.useContext)(j).displayError;return Object(l.jsxs)("div",{className:"register",children:[Object(l.jsx)(I,{children:"Username and password should be at least four characters long."}),Object(l.jsx)("h2",{children:"Register Form"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target.username.value,c=e.target.password.value;c===e.target["re-password"].value?n.length<4?r("Username should be at least four(4) characters long!"):c.length<4?r("Password should be at least four(4) characters long!"):n&&c?function(e,t){return M.apply(this,arguments)}(n,c).then((function(e){if(console.log(e),e.hasOwnProperty("errorData"))throw new Error(e.message);t.push("/login")})).catch((function(e){r(e.message),console.log(e)})):r("All fields are required"):r("Passwords mismatch!")},children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",id:"username",placeholder:"Enter username ... "}),Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Enter your password ..."}),Object(l.jsx)("label",{htmlFor:"re-password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"re-password",id:"re-password",placeholder:"Repeat your password ..."}),Object(l.jsx)("input",{type:"submit",value:"Register"})]})]})},V=function(){return Object(l.jsxs)("div",{className:"page-not-found",children:[Object(l.jsx)("img",{src:"/Page404.png",alt:"Page404"}),Object(l.jsx)("h2",{children:"Page Not Found"}),Object(l.jsxs)("p",{children:["Return to ",Object(l.jsx)(o.b,{to:"/",children:"Home"})," Page?"]})]})},Y=function(){return Object(l.jsxs)("div",{className:"under-construction",children:[Object(l.jsx)("img",{src:"/Under-construction.png",alt:"Under Construction Logo"}),Object(l.jsx)("h3",{children:"This page is under construction ..."})]})},G=(r(39),function(e){var t=Object(n.useContext)(j).clearError;return Object(l.jsxs)("div",{className:"error-window",children:[Object(l.jsx)("p",{className:"error-message",children:e.children}),Object(l.jsx)("button",{className:"error-button",onClick:t,children:"Close"})]})}),$=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),i=a[0],d=a[1],b=Object(n.useContext)(p),h=b.username,O=b.userId,x=b.userToken,f=Object(n.useContext)(j).displayError;return Object(n.useEffect)((function(){d(!0),P.getAllFromUser(x,O).then((function(e){if(e.hasOwnProperty("errorData"))throw new Error(e.message);c(e),d(!1)})).catch((function(e){d(!1),f(e.message)}))}),[]),Object(l.jsxs)("div",{className:"user-profile",children:[Object(l.jsxs)("h2",{children:["Hello, ",h,"!"]}),Object(l.jsx)("h4",{children:"Here you can find all your products."}),i&&Object(l.jsx)("p",{children:"Loading..."}),!r.length&&!i&&Object(l.jsxs)("div",{children:["We still don't have a product from you. Add your first from ",Object(l.jsx)(o.b,{to:"/product/add",children:"here"}),". "]}),r&&r.map((function(e){return Object(l.jsx)(D,Object(m.a)({},e),e.objectId)}))]})},W=function(e){return function(t){var r=Object(n.useContext)(p),c=r.username,s=r.userToken,a=Object(i.f)();return c&&s?Object(l.jsx)(e,Object(m.a)({},t)):(a.push("/login"),null)}};r(40);var z=function(){var e=Object(n.useContext)(j).errorMessage;return Object(l.jsxs)("div",{className:"site-container",children:[Object(l.jsxs)(b,{children:[Object(l.jsx)(h,{}),e&&Object(l.jsx)(G,{children:e}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{path:"/",exact:!0,component:T}),Object(l.jsx)(i.a,{path:"/contacts",exact:!0,component:A}),Object(l.jsx)(i.a,{path:"/about",exact:!0,component:Y}),Object(l.jsx)(i.a,{path:"/product/add",exact:!0,component:L}),Object(l.jsx)(i.a,{path:"/product/:id",exact:!0,component:B}),Object(l.jsx)(i.a,{path:"/edit/:id",exact:!0,component:W(R)}),Object(l.jsx)(i.a,{path:"/login",exact:!0,children:Object(l.jsx)(J,{})}),Object(l.jsx)(i.a,{path:"/register",exact:!0,component:q}),Object(l.jsx)(i.a,{path:"/user/:username",component:W($)}),Object(l.jsx)(i.a,{path:"*",children:Object(l.jsx)(V,{})})]})]}),Object(l.jsx)(O,{})]})};a.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(o.a,{children:Object(l.jsx)(d,{children:Object(l.jsx)(z,{})})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.b0e59f5a.chunk.js.map